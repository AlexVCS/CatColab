\title{Categories with links}
\taxon{doctrine}
\import{macros}

\p{A category with links is a category equipped with a "linking" between objects
and morphisms. The idea is that category with links is related to a stock-flow
diagram in the same way that a category is related to a graph.}

\definition{Category with links}{
  A \define{category with links} is a category \cat{C} equipped with a profunctor
  #{L: \cat{C} \proto \cat{C}^\to},
  where #{\cat{C}^\to} is the \nlab{arrow category} of \cat{C}.
}

\p{Let #{(\cat{C},L)} be a category with links.

Given an object #{x} and a morphism #{f: y \to z} in \cat{C}, a heteromorphim
#{\ell: x \hetto f}, or element #{\ell \in L(x,f)}, is called a \define{link
from #{x} to #{f}}. By the profunctorality of #{L}, a link #{x \hetto f} can be
pulled back along a morphism #{g: x' \to x} and...}

\p{Categories with links are models of the following double theory.}

\transclude{thy-0003}

\subtree{
\title{Arrows versus twisted arrows}
\taxon{Warning}

\p{The tabulator #{\top P} of a profunctor #{P: \cat{C} \proto \cat{D}} is its
\nlab{category of elements}, defined in such a way that there are projection
functors #{\top P \to \cat{C}} and #{\top P \to \cat{D}}.
This category is \em{not} the same as the category of elements of #{P}
viewed as a copresheaf on #{\cat{C}^\op \times \cat{D}}, which has projections
#{\int P \to \cat{C}^\op} and #{\int P \to \cat{D}}. Thus, the tabulator
of the hom-profunctor on \cat{C} is the \nlab{arrow category}, \em{not} the
\nlab{twisted arrow category}, of \cat{C}.
See also the discussion of the \nlab{graph of a profunctor} on the nLab.}
}
